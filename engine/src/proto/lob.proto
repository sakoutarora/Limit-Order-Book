syntax = "proto3";

package orders;

service OrderService {
  rpc SubmitOrder (stream OrderRequest) returns (OrderResponse);
  rpc ModifyOrder (stream ModifyOrderRequest) returns (OrderResponse);
  rpc CancelOrder (stream CancelOrderRequest) returns (OrderResponse);
  rpc GetLob (LobRequest) returns (LobResponse);
}

message LobRequest {
  string ticker = 1;
}

message PriceLevel {
  double price = 1;
  int32 total_qty = 2;
}

message LobResponse {
  string ticker = 1;
  repeated PriceLevel bids = 2;
  repeated PriceLevel asks = 3;
}

message OrderRequest {
  string tikcer = 1;
  string type = 2; 
  double price = 3;
  int32 quantity = 4;
}

message ModifyOrderRequest {
  int64 order_id = 1;
  double new_price = 2;
  int32 new_quantity = 3;
}

message CancelOrderRequest {
  int64 order_id = 1;
}

message OrderResponse {
  string status = 1;
  string message = 2;
  int64 order_id = 3;
}